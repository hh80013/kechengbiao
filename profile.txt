profile.js
Page({
  data: {
    courseCount: 0,
    taskCount: 0,
    completedTaskCount: 0,
    nickName: 'åå—ç†å·¥å¤§å­¦å­¦ç”Ÿ', // æ–°å¢ï¼šæ˜µç§°æ•°æ®
    userInfo: 'ä¿¡æ¯å·¥ç¨‹ä¸“ä¸šÂ·å¤§äºŒ' // æ–°å¢ï¼šç”¨æˆ·ä¿¡æ¯
  },

  onShow() {
    // åŠ è½½ç»Ÿè®¡æ•°æ®
    this.loadStats();
    // åŠ è½½ç”¨æˆ·ä¿¡æ¯
    this.loadUserInfo();
  },

  // åŠ è½½ç”¨æˆ·ä¿¡æ¯
  loadUserInfo() {
    const nickName = wx.getStorageSync('nickName');
    const userInfo = wx.getStorageSync('userInfo');
    
    if (nickName) {
      this.setData({
        nickName: nickName
      });
    }
    
    if (userInfo) {
      this.setData({
        userInfo: userInfo
      });
    }
  },

  // åŠ è½½ç»Ÿè®¡æ•°æ®
  loadStats() {
    const courses = wx.getStorageSync('courses');
    const tasks = wx.getStorageSync('tasks') || [];
    
    // è®¡ç®—è¯¾ç¨‹æ€»æ•°
    let totalCourses = 0;
    if (courses) {
      for (let day in courses) {
        totalCourses += courses[day] ? courses[day].length : 0;
      }
    }
    
    // è®¡ç®—ä»»åŠ¡ç»Ÿè®¡
    const totalTasks = tasks.length;
    const completedTasks = tasks.filter(task => task.completed).length;
    
    this.setData({
      courseCount: totalCourses,
      taskCount: totalTasks,
      completedTaskCount: completedTasks
    });
  },

  // ç¼–è¾‘æ˜µç§°
  editNickName() {
    wx.showModal({
      title: 'ä¿®æ”¹æ˜µç§°',
      content: 'è¯·è¾“å…¥æ–°çš„æ˜µç§°',
      editable: true,
      placeholderText: 'è¯·è¾“å…¥æ˜µç§°',
      success: (res) => {
        if (res.confirm && res.content) {
          // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
          wx.setStorageSync('nickName', res.content);
          
          // æ›´æ–°é¡µé¢æ˜¾ç¤º
          this.setData({
            nickName: res.content
          });
          
          wx.showToast({
            title: 'æ˜µç§°ä¿®æ”¹æˆåŠŸ',
            icon: 'success'
          });
        }
      }
    });
  },

  // ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯
  editUserInfo() {
    wx.showModal({
      title: 'ä¿®æ”¹ä¿¡æ¯',
      content: 'è¯·è¾“å…¥ä¸“ä¸šå’Œå¹´çº§ä¿¡æ¯',
      editable: true,
      placeholderText: 'ä¾‹å¦‚ï¼šä¿¡æ¯å·¥ç¨‹ä¸“ä¸šÂ·å¤§äºŒ',
      success: (res) => {
        if (res.confirm && res.content) {
          // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
          wx.setStorageSync('userInfo', res.content);
          
          // æ›´æ–°é¡µé¢æ˜¾ç¤º
          this.setData({
            userInfo: res.content
          });
          
          wx.showToast({
            title: 'ä¿¡æ¯ä¿®æ”¹æˆåŠŸ',
            icon: 'success'
          });
        }
      }
    });
  },

  // ç‚¹å‡»ç”¨æˆ·å¡ç‰‡ï¼ˆåŒæ—¶ä¿®æ”¹æ˜µç§°å’Œä¿¡æ¯ï¼‰
  onTapUserCard() {
    wx.showActionSheet({
      itemList: ['ä¿®æ”¹æ˜µç§°', 'ä¿®æ”¹ä¸“ä¸šä¿¡æ¯', 'å–æ¶ˆ'],
      success: (res) => {
        if (res.tapIndex === 0) {
          this.editNickName();
        } else if (res.tapIndex === 1) {
          this.editUserInfo();
        }
      }
    });
  },

  // è·³è½¬åˆ°é¦–é¡µ
  goToIndex() {
    wx.switchTab({
      url: '/pages/index/index'
    });
  },

  // è·³è½¬åˆ°ä»»åŠ¡é¡µ
  goToTask() {
    wx.switchTab({
      url: '/pages/task/task'
    });
  },

  // æ¸…ç©ºæ‰€æœ‰æ•°æ®
  clearAllData() {
    wx.showModal({
      title: 'æ¸…ç©ºæ•°æ®',
      content: 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¯¾ç¨‹å’Œä»»åŠ¡æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼',
      success: (res) => {
        if (res.confirm) {
          // æ¸…ç©ºæœ¬åœ°å­˜å‚¨
          wx.removeStorageSync('courses');
          wx.removeStorageSync('tasks');
          
          // æ›´æ–°ç»Ÿè®¡æ•°æ®
          this.loadStats();
          
          wx.showToast({
            title: 'æ•°æ®å·²æ¸…ç©º',
            icon: 'success'
          });
        }
      }
    });
  }
});




profile.json
{
  "usingComponents": {}
}







profile.wxml
<!-- æˆ‘çš„é¡µé¢ -->
<view class="profile-container">
  <!-- ç”¨æˆ·å¡ç‰‡ -->
  <view class="user-card" bindtap="onTapUserCard">
    <view class="user-avatar">
      {{nickName ? nickName.charAt(0) : 'ç”¨'}}
    </view>
    <view class="user-info">
      <text class="user-name">{{nickName}}</text>
      <text class="user-id">{{userInfo}}</text>
    </view>
  </view>

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-list">
    <view class="menu-item" bindtap="goToTask">
      <view class="menu-icon">ğŸ“‹</view>
      <text class="menu-text">æˆ‘çš„ä»»åŠ¡</text>
      <view class="menu-arrow">â€º</view>
    </view>
    <view class="menu-item" bindtap="clearAllData">
      <view class="menu-icon">ğŸ—‘ï¸</view>
      <text class="menu-text">æ¸…ç©ºæ‰€æœ‰æ•°æ®</text>
      <view class="menu-arrow">â€º</view>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="dev-team">
    <text class="team-title">å­¦ä¹ ç»Ÿè®¡</text>
    <text class="team-members">{{courseCount}}æ€»è¯¾ç¨‹æ•°</text>
    <text class="team-members">{{taskCount}}æ€»ä»»åŠ¡æ•°</text>
    <text class="team-members">{{completedTaskCount}}å®Œæˆä»»åŠ¡</text>
  </view>

  <!-- å¼€å‘å›¢é˜Ÿä¿¡æ¯ -->
  <view class="dev-team">
    <text class="team-title">è¯¾ç¨‹é€š v1.0</text>
    <text class="team-project">åå—ç†å·¥å¤§å­¦Â·ä¿¡æ¯å·¥ç¨‹ä¸“ä¸š</text>
    <text class="team-members">è½¯ä»¶å·¥ç¨‹è¯¾ç¨‹é¡¹ç›®</text>
    <text class="team-version">å°ç»„å››äººé¡¹ç›®</text>
  </view>

  <!-- åº•éƒ¨å¯¼èˆªæç¤º -->
  <view class="dev-team" style="margin-bottom: 100rpx;">
    <text class="team-members">ç‚¹å‡»ä¸Šæ–¹ç”¨æˆ·å¡ç‰‡å¯ä»¥ä¿®æ”¹æ˜µç§°</text>
  </view>
</view>







profile.wxss
/* æˆ‘çš„é¡µé¢æ ·å¼ */
.profile-container {
  padding: 20rpx;
  background-color: #f5f5f5;
  min-height: 100vh;
}

/* ç”¨æˆ·å¡ç‰‡ */
.user-card {
  background: linear-gradient(135deg, #4a90e2, #50c878);
  border-radius: 20rpx;
  padding: 40rpx 30rpx;
  color: white;
  display: flex;
  align-items: center;
  margin-bottom: 30rpx;
  box-shadow: 0 4rpx 15rpx rgba(74, 144, 226, 0.3);
}

.user-avatar {
  width: 100rpx;
  height: 100rpx;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40rpx;
  font-weight: bold;
  margin-right: 25rpx;
}

.user-info {
  flex: 1;
}

.user-name {
  font-size: 36rpx;
  font-weight: bold;
  display: block;
  margin-bottom: 10rpx;
}

.user-id {
  font-size: 26rpx;
  opacity: 0.9;
  display: block;
}

/* èœå•åˆ—è¡¨ */
.menu-list {
  background: white;
  border-radius: 15rpx;
  margin-bottom: 30rpx;
  overflow: hidden;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.menu-item {
  display: flex;
  align-items: center;
  padding: 30rpx;
  border-bottom: 1rpx solid #f0f0f0;
}

.menu-item:last-child {
  border-bottom: none;
}

.menu-icon {
  font-size: 36rpx;
  margin-right: 25rpx;
  width: 40rpx;
  text-align: center;
}

.menu-text {
  flex: 1;
  font-size: 30rpx;
  color: #333;
}

.menu-arrow {
  font-size: 36rpx;
  color: #ccc;
}

/* å¼€å‘å›¢é˜Ÿä¿¡æ¯ */
.dev-team {
  background: white;
  border-radius: 15rpx;
  padding: 30rpx;
  margin-bottom: 30rpx;
  text-align: center;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.team-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 15rpx;
}

.team-members {
  font-size: 26rpx;
  color: #666;
  display: block;
  margin-bottom: 10rpx;
}

.team-project {
  font-size: 24rpx;
  color: #4a90e2;
  display: block;
  margin-bottom: 10rpx;
}

.team-version {
  font-size: 22rpx;
  color: #999;
  display: block;
}

/* æ“ä½œæŒ‰é’® */
.action-buttons {
  display: flex;
  gap: 20rpx;
}

.action-btn {
  flex: 1;
  text-align: center;
  padding: 25rpx 0;
  border-radius: 12rpx;
  font-size: 28rpx;
  font-weight: 500;
}

.action-btn.logout {
  background: #ff6b6b;
  color: white;
}

.action-btn.feedback {
  background: #f0f0f0;
  color: #666;
}