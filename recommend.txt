recommend.js
Page({
  data: {
    // æ–°å¢ï¼šå½“å‰æ—¥æœŸå’Œæ˜ŸæœŸä¿¡æ¯
    currentDate: '',
    currentWeek: '',
    currentTime: '',
    
    // æ–°å¢ï¼šéšæœºé¼“åŠ±è¯­
    encouragements: [
      "ğŸ’ª åšæŒå°±æ˜¯èƒœåˆ©ï¼Œä»Šå¤©ä¹Ÿè¦åŠ æ²¹å­¦ä¹ ï¼",
      "ğŸŒŸ æ¯ä¸€æ¬¡åŠªåŠ›ï¼Œéƒ½åœ¨ä¸ºæœªæ¥é“ºè·¯ï¼",
      "ğŸš€ ä»Šå¤©çš„æ±—æ°´ï¼Œæ˜å¤©çš„æˆå°±ï¼"
    ],
    currentEncouragement: '',
    
    // æ–°å¢ï¼šå­¦ä¹ è®¡åˆ’æ ¹æ®æ˜ŸæœŸå˜åŒ–
    weekPlans: {
      1: "å‘¨ä¸€é€‚åˆå¤ä¹ æ•°å­¦ï¼Œæ¨èé«˜ç­‰æ•°å­¦",
      2: "å‘¨äºŒé€‚åˆç¼–ç¨‹ç»ƒä¹ ï¼Œæ¨èæ•°æ®ç»“æ„",
      3: "å‘¨ä¸‰é€‚åˆè‹±è¯­å­¦ä¹ ï¼Œæ¨èè‹±è¯­é˜…è¯»",
      4: "å‘¨å››é€‚åˆå¤ä¹ ä¸“ä¸šè¯¾ï¼Œæ¨èè®¡ç®—æœºç»„æˆåŸç†",
      5: "å‘¨äº”é€‚åˆé¡¹ç›®å®è·µï¼Œæ¨èè½¯ä»¶å·¥ç¨‹",
      6: "å‘¨æœ«é€‚åˆæ‰©å±•å­¦ä¹ ï¼Œæ¨èAIæŠ€æœ¯",
      0: "å‘¨æ—¥é€‚åˆä¼‘æ¯æ•´ç†ï¼Œè°ƒæ•´çŠ¶æ€"
    },
    todayPlan: '',
    
    // åŸæœ‰æ•°æ®
    studyPlan: {
      title: "é«˜ç­‰æ•°å­¦å¤ä¹ ",
      desc: "æ¯å¤©ä¸‹åˆ15:00-17:00æ˜¯æ‚¨çš„ç©ºé—²æ—¶é—´ï¼Œæ¨èå¤ä¹ æé™ä¸å¾®ç§¯åˆ†",
      duration: "æ¨èæ—¶é•¿ï¼š2å°æ—¶",
      status: "ä»Šæ—¥æ¨è"
    },
    
    partner: {
      name: "æç¥",
      major: "è®¡ç®—æœºç§‘å­¦ä¸“ä¸š",
      matchRate: "85%"
    },
    
    activity: {
      title: "AIæŠ€æœ¯ç ”è®¨ä¼š",
      time: "1æœˆ9æ—¥ï¼ˆå‘¨äº”ï¼‰19:00",
      location: "æŠ¥å‘Šå…",
      desc: "æ—¶é•¿2å°æ—¶ï¼Œä¸æ‚¨æ— è¯¾ç¨‹å†²çª"
    }
  },

  onLoad() {
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
    this.initPageData();
  },

  onShow() {
    // é¡µé¢æ˜¾ç¤ºæ—¶æ›´æ–°æ•°æ®
    this.initPageData();
  },

  // åˆå§‹åŒ–é¡µé¢æ•°æ®
  initPageData() {
    // è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´
    const now = new Date();
    
    // æ ¼å¼åŒ–æ—¥æœŸï¼š2023å¹´11æœˆ20æ—¥
    const year = now.getFullYear();
    const month = now.getMonth() + 1;
    const date = now.getDate();
    const formattedDate = `${year}å¹´${month}æœˆ${date}æ—¥`;
    
    // è·å–æ˜ŸæœŸå‡ 
    const weekDays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
    const weekDay = now.getDay(); // 0-6
    const weekDayStr = weekDays[weekDay];
    
    // æ ¼å¼åŒ–æ—¶é—´ï¼š10:30
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const formattedTime = `${hours}:${minutes}`;
    
    // éšæœºé€‰æ‹©é¼“åŠ±è¯­
    const randomIndex = Math.floor(Math.random() * this.data.encouragements.length);
    const randomEncouragement = this.data.encouragements[randomIndex];
    
    // æ ¹æ®æ˜ŸæœŸå‡ è®¾ç½®å­¦ä¹ è®¡åˆ’
    const todayPlan = this.data.weekPlans[weekDay] || "ä¿æŒæ¯æ—¥å­¦ä¹ ï¼Œå·©å›ºçŸ¥è¯†";
    
    this.setData({
      currentDate: formattedDate,
      currentWeek: weekDayStr,
      currentTime: formattedTime,
      currentEncouragement: randomEncouragement,
      todayPlan: todayPlan
    });
    
    // æ›´æ–°å­¦ä¹ è®¡åˆ’æè¿°
    this.setData({
      'studyPlan.desc': `ä»Šå¤©æ˜¯${weekDayStr}ï¼Œ${todayPlan}`
    });
  },

  // ===== ç‚¹å‡»äº¤äº’åŠŸèƒ½ =====
  
  // ç‚¹å‡»è‡ªä¹ ä¼™ä¼´
  onPartnerTap() {
    wx.showModal({
      title: 'è”ç³»è‡ªä¹ ä¼™ä¼´',
      content: `æ˜¯å¦è¦è”ç³» ${this.data.partner.name} åŒå­¦ï¼Ÿ\nåŒ¹é…ç‡ï¼š${this.data.partner.matchRate}`,
      cancelText: 'å†çœ‹çœ‹',
      confirmText: 'è”ç³»TA',
      success: (res) => {
        if (res.confirm) {
          wx.showToast({
            title: 'å·²å‘é€è¯·æ±‚',
            icon: 'none'
          });
        }
      }
    });
  },

  // ç‚¹å‡»æ ¡å›­æ´»åŠ¨
  onActivityTap() {
    const activity = this.data.activity;
    wx.showModal({
      title: activity.title,
      content: `ğŸ“… æ—¶é—´ï¼š${activity.time}\nğŸ“ åœ°ç‚¹ï¼š${activity.location}\nâ° ${activity.desc}`,
      cancelText: 'å–æ¶ˆ',
      confirmText: 'ç«‹å³æŠ¥å',
      success: (res) => {
        if (res.confirm) {
          wx.showToast({
            title: 'æŠ¥åæˆåŠŸï¼',
            icon: 'success'
          });
          
          // 3ç§’ååˆ·æ–°é¼“åŠ±è¯­
          setTimeout(() => {
            const randomIndex = Math.floor(Math.random() * this.data.encouragements.length);
            this.setData({
              currentEncouragement: this.data.encouragements[randomIndex]
            });
          }, 3000);
        }
      }
    });
  },

  // ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
  onViewDetail() {
    wx.showModal({
      title: 'æ´»åŠ¨è¯¦æƒ…',
      content: 'AIæŠ€æœ¯ç ”è®¨ä¼šï¼Œåˆ†äº«aié¢†åŸŸæœ€æ–°æˆæœ',
      showCancel: false,
      confirmText: 'çŸ¥é“äº†'
    });
  },

  // åˆ·æ–°é¼“åŠ±è¯­
  onRefreshEncouragement() {
    const randomIndex = Math.floor(Math.random() * this.data.encouragements.length);
    this.setData({
      currentEncouragement: this.data.encouragements[randomIndex]
    });
    
    wx.showToast({
      title: 'å·²æ›´æ–°é¼“åŠ±è¯­',
      icon: 'success'
    });
  },

  // æŸ¥çœ‹å­¦ä¹ ç»Ÿè®¡
  onViewStats() {
    wx.navigateTo({
      url: '/pages/profile/profile'
    });
  }
});







recommend.json
{
  "usingComponents": {}
}







recommend.wxml
<!-- AIæ¨èé¡µé¢ -->
<view class="recommend-container">
  <!-- é¡µé¢æ ‡é¢˜å’Œæ—¶é—´æ˜¾ç¤º -->
  <view class="page-header">
    <text class="page-title">æ™ºèƒ½æ¨è</text>
    <view class="time-display">
      <text class="date">{{currentDate}}</text>
      <text class="week">{{currentWeek}} {{currentTime}}</text>
    </view>
  </view>

  <!-- éšæœºé¼“åŠ±è¯­ -->
  <view class="encouragement-section" bindtap="onRefreshEncouragement">
    <text class="encouragement-text">ğŸ’¬ {{currentEncouragement}}</text>
    <text class="refresh-hint">ç‚¹å‡»åˆ·æ–°</text>
  </view>

  <!-- å­¦ä¹ è®¡åˆ’ -->
  <view class="section">
    <view class="section-title">
      <text class="title-text">å­¦ä¹ è®¡åˆ’</text>
      <text class="title-tag">{{studyPlan.status}}</text>
    </view>
    
    <view class="plan-card">
      <text class="plan-title">{{studyPlan.title}}</text>
      <text class="plan-desc">{{studyPlan.desc}}</text>
      <view class="plan-meta">
        <text class="plan-time">{{studyPlan.duration}}</text>
        <text class="plan-tag">ä»Šæ—¥æ¨è</text>
      </view>
    </view>
  </view>

  <!-- è‡ªä¹ ä¼™ä¼´ -->
  <view class="section">
    <view class="section-title">
      <text class="title-text">è‡ªä¹ ä¼™ä¼´</text>
    </view>
    
    <view class="partner-card" bindtap="onPartnerTap">
      <view class="partner-info">
        <view class="partner-avatar">{{partner.name.charAt(0)}}</view>
        <view class="partner-details">
          <text class="partner-name">{{partner.name}}</text>
          <text class="partner-major">{{partner.major}}</text>
        </view>
      </view>
      <view class="partner-match">
        <text class="match-rate">åŒ¹é…ç‡ {{partner.matchRate}}</text>
        <text class="match-action">è”ç³»TA â†’</text>
      </view>
    </view>
  </view>

  <!-- æ ¡å›­æ´»åŠ¨ -->
  <view class="section">
    <view class="section-title">
      <text class="title-text">æ ¡å›­æ´»åŠ¨</text>
    </view>
    
    <view class="activity-card">
      <text class="activity-title" bindtap="onViewDetail">{{activity.title}}</text>
      <view class="activity-meta">
        <text class="activity-time">ğŸ“… {{activity.time}}</text>
        <text class="activity-location">ğŸ“ {{activity.location}}</text>
      </view>
      <text class="activity-desc">{{activity.desc}}</text>
      <view class="activity-actions">
        <text class="action-btn view-detail" bindtap="onViewDetail">æŸ¥çœ‹è¯¦æƒ…</text>
        <text class="action-btn primary" bindtap="onActivityTap">ç«‹å³æŠ¥å</text>
      </view>
    </view>
  </view>

  <!-- æ¨èä¾æ® -->
  <view class="recommend-reason">
    <text class="reason-title">ğŸ“Š æ¨èä¾æ®</text>
    <text class="reason-text">åŸºäºæ‚¨çš„å­¦ä¹ ä¹ æƒ¯ã€è¯¾ç¨‹å®‰æ’å’Œå…´è¶£åå¥½è¿›è¡Œæ™ºèƒ½æ¨è</text>
    <text class="reason-subtext">å½“å‰æ—¶é—´ï¼š{{currentDate}} {{currentWeek}} {{currentTime}}</text>
  </view>
</view>









recommend.wxss
/* AIæ¨èé¡µé¢æ ·å¼ */
.recommend-container {
  padding: 20rpx;
  background-color: #f5f5f5;
  min-height: 100vh;
}

/* é¡µé¢æ ‡é¢˜å’Œæ—¶é—´æ˜¾ç¤º */
.page-header {
  margin-bottom: 30rpx;
  padding: 20rpx;
  background: white;
  border-radius: 15rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.page-title {
  font-size: 40rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 15rpx;
}

.time-display {
  display: flex;
  justify-content: space-between;
  font-size: 26rpx;
  color: #666;
}

.date {
  font-weight: 500;
}

.week {
  color: #4a90e2;
  font-weight: bold;
}

/* é¼“åŠ±è¯­éƒ¨åˆ† */
.encouragement-section {
  background: linear-gradient(135deg, #ffecd2, #fcb69f);
  border-radius: 15rpx;
  padding: 25rpx;
  margin-bottom: 30rpx;
  text-align: center;
  color: #333;
  box-shadow: 0 4rpx 15rpx rgba(252, 182, 159, 0.3);
}

.encouragement-text {
  font-size: 28rpx;
  font-weight: 500;
  display: block;
  margin-bottom: 10rpx;
}

.refresh-hint {
  font-size: 22rpx;
  color: #666;
  display: block;
}

/* é€šç”¨æ ·å¼å¤ç”¨ä»»åŠ¡é¡µé¢çš„éƒ¨åˆ† */

/* è®¡åˆ’å¡ç‰‡ */
.plan-card {
  background: linear-gradient(135deg, #4a90e2, #50c878);
  border-radius: 15rpx;
  padding: 30rpx;
  color: white;
}

.plan-title {
  font-size: 32rpx;
  font-weight: bold;
  display: block;
  margin-bottom: 15rpx;
}

.plan-desc {
  font-size: 26rpx;
  line-height: 1.4;
  display: block;
  margin-bottom: 20rpx;
  opacity: 0.9;
}

.plan-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.plan-time {
  font-size: 24rpx;
}

.plan-tag {
  background: rgba(255, 255, 255, 0.2);
  padding: 8rpx 20rpx;
  border-radius: 20rpx;
  font-size: 22rpx;
}

/* è‡ªä¹ ä¼™ä¼´å¡ç‰‡ */
.partner-card {
  background: white;
  border-radius: 15rpx;
  padding: 30rpx;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.partner-info {
  display: flex;
  align-items: center;
}

.partner-avatar {
  width: 80rpx;
  height: 80rpx;
  background: #4a90e2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 32rpx;
  font-weight: bold;
  margin-right: 20rpx;
}

.partner-details {
  flex: 1;
}

.partner-name {
  font-size: 30rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 8rpx;
}

.partner-major {
  font-size: 24rpx;
  color: #666;
  display: block;
}

.partner-match {
  text-align: right;
}

.match-rate {
  font-size: 28rpx;
  color: #4a90e2;
  font-weight: bold;
  display: block;
  margin-bottom: 10rpx;
}

.match-action {
  font-size: 24rpx;
  color: #4a90e2;
  padding: 8rpx 20rpx;
  border: 1rpx solid #4a90e2;
  border-radius: 20rpx;
  display: inline-block;
}

/* æ´»åŠ¨å¡ç‰‡ */
.activity-card {
  background: white;
  border-radius: 15rpx;
  padding: 30rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.activity-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 15rpx;
}

.activity-meta {
  display: flex;
  margin-bottom: 15rpx;
}

.activity-time {
  font-size: 26rpx;
  color: #666;
  margin-right: 30rpx;
}

.activity-location {
  font-size: 26rpx;
  color: #666;
}

.activity-desc {
  font-size: 26rpx;
  color: #50c878;
  display: block;
  margin-bottom: 25rpx;
}

.activity-actions {
  display: flex;
  justify-content: flex-end;
}

.action-btn {
  padding: 15rpx 30rpx;
  border: 1rpx solid #ddd;
  border-radius: 25rpx;
  font-size: 24rpx;
  color: #666;
  margin-left: 20rpx;
}

.action-btn.primary {
  background: #4a90e2;
  color: white;
  border-color: #4a90e2;
}

/* æ¨èä¾æ® */
.recommend-reason {
  background: white;
  border-radius: 15rpx;
  padding: 30rpx;
  margin-top: 30rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.reason-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 15rpx;
}

.reason-text {
  font-size: 24rpx;
  color: #666;
  line-height: 1.4;
  display: block;
  margin-bottom: 10rpx;
}

.reason-subtext {
  font-size: 22rpx;
  color: #999;
  display: block;
}

/* å¿«æ·æ“ä½œ */
.quick-actions {
  display: flex;
  justify-content: space-around;
  background: white;
  border-radius: 15rpx;
  padding: 25rpx;
  margin-top: 30rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.action-item {
  text-align: center;
  flex: 1;
  padding: 0 10rpx;
}

.action-icon {
  font-size: 40rpx;
  display: block;
  margin-bottom: 10rpx;
}

.action-text {
  font-size: 22rpx;
  color: #666;
  display: block;
}

/* ç‚¹å‡»æ•ˆæœ */
.partner-card:active,
.activity-title:active,
.encouragement-section:active,
.action-item:active {
  opacity: 0.8;
}